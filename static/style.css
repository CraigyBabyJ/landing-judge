/* Landing Judge Overlay Styles
   - Portrait 1080x1920 canvas for OBS Browser Source
   - Animated score with tiered colours and quote text underneath
   - Hue rotation via CSS custom property (set from desktop UI)
*/
/* Base reset */
* { box-sizing: border-box; }
html, body { 
  width: 1080px; 
  height: 1920px; 
  margin: 0; 
  padding: 0; 
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  overflow: hidden;
}

#overlay-root { position: relative; width: 1080px; height: 1920px; filter: hue-rotate(var(--overlay-hue, 0deg)); }

/* Number Display */
.number-display {
  position: fixed;
  /* Raise final resting position for portrait TikTok framing */
  top: 42%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 300ms ease;
}

.number-display.show { opacity: 1; }
.number-display.hidden { opacity: 0; }

.score-fraction {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 18px;
  transform-origin: center;
  transition: transform 0.1s ease;
}

.vote-score {
  font-size: 300px;
  font-weight: 900;
  color: #ffffff;
  text-shadow: 0 0 50px rgba(255, 255, 255, 0.8), 0 0 100px rgba(255, 255, 255, 0.5);
  -webkit-text-stroke: 1px #000000;
  text-stroke: 1px #000000;
  line-height: 1;
  margin: 0;
}

.divider-line {
  width: 260px;
  height: 6px;
  background: #ffffff;
  box-shadow: 0 0 30px rgba(255, 255, 255, 0.8);
  border: 1px solid #000000;
  margin: 0;
}

.max-score {
  font-size: 96px;
  font-weight: 700;
  color: #ffffff;
  text-shadow: 0 0 30px rgba(255, 255, 255, 0.6);
  -webkit-text-stroke: 1px #000000;
  text-stroke: 1px #000000;
  line-height: 1;
  margin: 0;
  opacity: 0.9;
}

/* Quote display styling - positioned under the score fraction */
.quote-display {
  position: fixed;
  top: 50%;
  left: 50%;
  /* Push quote further below the score to avoid overlap */
  transform: translateX(-50%) translateY(340px);
  font-size: 32px;
  font-weight: 400;
  color: #ffffff;
  text-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
  -webkit-text-stroke: 1px #000000;
  text-stroke: 1px #000000;
  text-align: center;
  max-width: 800px;
  line-height: 1.3;
  opacity: 0;
  transition: opacity 0.5s ease 0.2s, transform 0.5s ease 0.2s;
}

.quote-display.show {
  opacity: 0.9;
  transform: translateX(-50%) translateY(360px);
}

/* Color tiers for numbers */
.tier-bad .vote-score   { color: #ff4d4f; text-shadow: 0 0 50px rgba(255, 77, 79, 0.8), 0 0 100px rgba(255, 77, 79, 0.5); }
.tier-bad .divider-line { background: #ff4d4f; box-shadow: 0 0 30px rgba(255, 77, 79, 0.8); }

.tier-ok .vote-score    { color: #ffb020; text-shadow: 0 0 50px rgba(255, 176, 32, 0.8), 0 0 100px rgba(255, 176, 32, 0.5); }
.tier-ok .divider-line  { background: #ffb020; box-shadow: 0 0 30px rgba(255, 176, 32, 0.8); }

.tier-good .vote-score  { color: #ffd93d; text-shadow: 0 0 50px rgba(255, 217, 61, 0.8), 0 0 100px rgba(255, 217, 61, 0.5); }
.tier-good .divider-line { background: #ffd93d; box-shadow: 0 0 30px rgba(255, 217, 61, 0.8); }

.tier-great .vote-score { color: #4dd167; text-shadow: 0 0 50px rgba(77, 209, 103, 0.8), 0 0 100px rgba(77, 209, 103, 0.5); }
.tier-great .divider-line { background: #4dd167; box-shadow: 0 0 30px rgba(77, 209, 103, 0.8); }

/* Animation keyframes - Simple and smooth */
@keyframes spinInFromDistance {
  0% { transform: scale(0.3) translateX(-600px); opacity: 0; }
  100% { transform: scale(1) translateX(0px); opacity: 1; }
}

@keyframes flipInFromFar {
  0% { transform: scale(0.2) translateY(-800px); opacity: 0; }
  100% { transform: scale(1) translateY(0px); opacity: 1; }
}

@keyframes bounceFromCorner {
  0% { transform: scale(0.2) translateX(600px) translateY(600px); opacity: 0; }
  70% { transform: scale(1.1) translateX(0px) translateY(0px); opacity: 0.9; }
  100% { transform: scale(1) translateX(0px) translateY(0px); opacity: 1; }
}

@keyframes slideFromFarLeft {
  0% { transform: translateX(-800px) scale(0.3); opacity: 0; }
  100% { transform: translateX(0px) scale(1); opacity: 1; }
}

@keyframes slideFromFarRight {
  0% { transform: translateX(800px) scale(0.3); opacity: 0; }
  100% { transform: translateX(0px) scale(1); opacity: 1; }
}

@keyframes slideFromFarTop {
  0% { transform: translateY(-800px) scale(0.3); opacity: 0; }
  100% { transform: translateY(0px) scale(1); opacity: 1; }
}

@keyframes slideFromFarBottom {
  0% { transform: translateY(800px) scale(0.3); opacity: 0; }
  100% { transform: translateY(0px) scale(1); opacity: 1; }
}

@keyframes zoomSpinFromSpace {
  0% { transform: scale(0.1) rotate(0deg) translateX(-400px) translateY(300px); opacity: 0; }
  100% { transform: scale(1) rotate(360deg) translateX(0px) translateY(0px); opacity: 1; }
}

@keyframes elasticFromDistance {
  0% { transform: scale(0.1) translateX(500px) translateY(-400px); opacity: 0; }
  60% { transform: scale(1.2) translateX(0px) translateY(0px); opacity: 0.8; }
  100% { transform: scale(1) translateX(0px) translateY(0px); opacity: 1; }
}

@keyframes spiralFromEdge {
  0% { transform: scale(0.2) rotate(0deg) translateX(600px) translateY(400px); opacity: 0; }
  100% { transform: scale(1) rotate(720deg) translateX(0px) translateY(0px); opacity: 1; }
}

@keyframes twistFromVoid {
  0% { transform: scale(0.1) rotateZ(-180deg) translateX(-600px) translateY(300px); opacity: 0; }
  100% { transform: scale(1) rotateZ(0deg) translateX(0px) translateY(0px); opacity: 1; }
}

/* Animation classes - Ultra smooth with ease-out timing */
.spin-in-smooth { animation: spinInFromDistance 1.8s ease-out forwards; }
.flip-in-smooth { animation: flipInFromFar 1.8s ease-out forwards; }
.bounce-in-dynamic { animation: bounceFromCorner 1.8s ease-out forwards; }
.slide-from-left { animation: slideFromFarLeft 1.8s ease-out forwards; }
.slide-from-right { animation: slideFromFarRight 1.8s ease-out forwards; }
.slide-from-top { animation: slideFromFarTop 1.8s ease-out forwards; }
.slide-from-bottom { animation: slideFromFarBottom 1.8s ease-out forwards; }
.zoom-spin-space { animation: zoomSpinFromSpace 1.8s ease-out forwards; }
.elastic-distance { animation: elasticFromDistance 1.8s ease-out forwards; }
.spiral-edge { animation: spiralFromEdge 1.8s ease-out forwards; }
.twist-void { animation: twistFromVoid 1.8s ease-out forwards; }

/* Overlay has no on-screen settings; all controls live in desktop UI */

/* ------------------------------------------------------------------
   ✨ Added Animations & Effects (non-destructive)
   ------------------------------------------------------------------ */

/* 1) Touchdown shockwave ring (trigger with .touchdown on #overlay-root) */
.number-display::after{
  content:"";
  position: absolute;
  inset: 0;
  margin: auto;
  width: 120px; height: 120px;
  border-radius: 999px;
  pointer-events: none;
  opacity: 0;
  box-shadow: 0 0 0 4px rgba(255,255,255,0.6), 0 0 60px rgba(255,255,255,0.4);
  transform: translate(-50%,-50%) scale(0.3);
  left: 50%; top: 42%; /* match score position */
}
.touchdown .number-display::after{ animation: touchdownShock 900ms cubic-bezier(.19,1,.22,1) forwards; }

@keyframes touchdownShock{
  0%{ opacity:0; transform: translate(-50%,-50%) scale(0.3); filter: blur(0px); }
  35%{ opacity:.9; filter: blur(2px); }
  100%{ opacity:0; transform: translate(-50%,-50%) scale(8); filter: blur(6px); }
}

/* 2) Camera shake (apply .impact-soft or .impact-hard on #overlay-root) */
.impact-soft .number-display{ animation: camShakeSoft 400ms ease-out; }
.impact-hard .number-display{ animation: camShakeHard 700ms ease-out; }

@keyframes camShakeSoft{
  0%,100%{ transform: translate(-50%,-50%) }
  20%{ transform: translate(calc(-50% + 4px), calc(-50% - 2px)) rotate(-0.3deg) }
  40%{ transform: translate(calc(-50% - 3px), calc(-50% + 3px)) rotate(0.2deg) }
  60%{ transform: translate(calc(-50% + 2px), calc(-50% + 1px)) rotate(-0.2deg) }
  80%{ transform: translate(calc(-50% - 1px), calc(-50% - 2px)) rotate(0.1deg) }
}
@keyframes camShakeHard{
  0%,100%{ transform: translate(-50%,-50%) }
  15%{ transform: translate(calc(-50% + 10px), calc(-50% - 6px)) rotate(-0.8deg) }
  30%{ transform: translate(calc(-50% - 8px), calc(-50% + 8px)) rotate(0.8deg) }
  45%{ transform: translate(calc(-50% + 6px), calc(-50% + 3px)) rotate(-0.6deg) }
  60%{ transform: translate(calc(-50% - 4px), calc(-50% - 5px)) rotate(0.5deg) }
  80%{ transform: translate(calc(-50% + 2px), calc(-50% + 2px)) rotate(-0.3deg) }
}

/* 3) “Butter” stamp (add .show-butter on #overlay-root; requires .butter-stamp element in HTML) */
.butter-stamp{
  position: fixed;
  top: 56%; left: 50%;
  transform: translate(-50%,-50%) rotate(-8deg) scale(0.6);
  font-size: 92px;
  font-weight: 900;
  color: #4dd167;
  text-shadow: 0 0 30px rgba(77,209,103,.6);
  -webkit-text-stroke: 2px #000;
  opacity: 0;
  pointer-events: none;
}
.show-butter .butter-stamp{ animation: butterPop 1.2s ease-out forwards; }

@keyframes butterPop{
  0%{ opacity:0; transform: translate(-50%,-50%) rotate(-18deg) scale(.2); filter: blur(4px); }
  40%{ opacity:1; transform: translate(-50%,-50%) rotate(-6deg) scale(1.05); filter: blur(0px); }
  70%{ transform: translate(-50%,-50%) rotate(-8deg) scale(0.98); }
  100%{ opacity:1; transform: translate(-50%,-50%) rotate(-8deg) scale(1); }
}

/* 4) Lens-flare sweep across digits (toggle .shine on #overlay-root) */
.vote-score{
  position: relative;
  /* Let outer glow render fully; flare pseudo-element still looks fine */
  overflow: visible;
}
.vote-score::after{
  content:"";
  position:absolute; top:0; left:-120%;
  width: 60%; height: 100%;
  background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.25) 45%, rgba(255,255,255,.75) 50%, rgba(255,255,255,.25) 55%, transparent 100%);
  transform: skewX(-12deg);
  opacity: 0;
  pointer-events:none;
}
.shine .vote-score::after{ animation: flareSweep 1.1s ease-out forwards; }

@keyframes flareSweep{
  0%{ left:-120%; opacity:0; }
  10%{ opacity:.9; }
  100%{ left:140%; opacity:0; }
}

/* 5) Chromatic aberration “glitch” (toggle .glitch on #overlay-root) */
.glitch .vote-score{ animation: glitchIn 420ms ease-out; }
@keyframes glitchIn{
  0%{ filter: none; text-shadow:
      -3px 0 rgba(255,0,0,.6),
       3px 0 rgba(0,255,255,.6); opacity: .6; }
  30%{ text-shadow:
      -2px 0 rgba(255,0,0,.5),
       2px 0 rgba(0,255,255,.5); opacity: .9; }
  60%{ text-shadow:
      -1px 0 rgba(255,0,0,.3),
       1px 0 rgba(0,255,255,.3); }
  100%{ text-shadow: none; opacity:1; }
}

/* 6) Heat-shimmer / mirage (toggle .mirage on #overlay-root) */
.mirage .score-fraction{ animation: mirageWobble 2.2s ease-in-out 0.2s both; }
@keyframes mirageWobble{
  0%{ filter: none; transform: translateZ(0); }
  40%{ filter: blur(0.6px) contrast(1.05) saturate(1.1); transform: scale(1.01); }
  100%{ filter: none; transform: scale(1); }
}

/* 7) Speed lines entry (toggle .speedlines on #overlay-root) */
#overlay-root::before{
  content:"";
  position: absolute; inset:0;
  pointer-events:none; opacity:0; 
  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,255,255,.0) 0px,
      rgba(255,255,255,.0) 18px,
      rgba(255,255,255,.08) 19px,
      rgba(255,255,255,.0) 21px
    );
  transform: translateY(40px);
}
.speedlines #overlay-root::before{ animation: speedLinesIn 900ms ease-out forwards; }

@keyframes speedLinesIn{
  0%{ opacity:0; transform: translateY(120px); filter: blur(4px); }
  60%{ opacity:.5; }
  100%{ opacity:0; transform: translateY(0); filter: blur(0); }
}

/* 8) Confetti burst (toggle .confetti on #overlay-root) */
.confetti .number-display::before{
  content:"";
  position:absolute; left:50%; top:42%;
  width:6px; height:6px; border-radius:2px;
  transform: translate(-50%,-50%);
  filter: drop-shadow(0 0 6px rgba(255,255,255,.5));
  animation: confettiPop 900ms ease-out forwards;
  /* multi-swatch “spray” */
  box-shadow:
    0 0 #fff,
    12px -6px #ff4d4f, -14px -10px #ffd93d, 6px 18px #4dd167, -16px 8px #ffb020,
    22px 4px #fff, -24px -2px #4dd167, 10px -18px #ffd93d, -8px 20px #ff4d4f,
    26px -14px #ffb020, -28px 12px #fff, 14px 26px #ffd93d, -10px 26px #4dd167,
    30px 0 #ff4d4f, -32px 0 #ffd93d, 0 30px #ffb020, 0 -30px #4dd167;
}
@keyframes confettiPop{
  0%{ opacity:0; transform: translate(-50%,-50%) scale(.6); }
  20%{ opacity:1; }
  100%{ opacity:0; transform: translate(-50%,-50%) scale(1.4); filter: blur(1px); }
}

/* 9) Odometer count-up roll (toggle .roll on #overlay-root) */
.roll .vote-score{ animation: rollIn 500ms cubic-bezier(.2,.8,.2,1) both; }
@keyframes rollIn{
  0%{ transform: translateY(.6em) rotateX(35deg); opacity:.2; filter: blur(2px); }
  65%{ transform: translateY(-.1em) rotateX(-8deg); opacity:1; filter: blur(0); }
  100%{ transform: translateY(0) rotateX(0); }
}

/* 10) Tier-aware aura pulses (auto with your .tier-* classes) */
.tier-bad .score-fraction{ animation: auraBad 1.4s ease-out; }
.tier-ok .score-fraction{ animation: auraOk 1.4s ease-out; }
.tier-good .score-fraction{ animation: auraGood 1.4s ease-out; }
.tier-great .score-fraction{ animation: auraGreat 1.4s ease-out; }

@keyframes auraBad{  0%{filter: drop-shadow(0 0 0 rgba(255,77,79,0)); } 50%{ filter: drop-shadow(0 0 40px rgba(255,77,79,.7)); } 100%{ filter: drop-shadow(0 0 0 rgba(255,77,79,0)); } }
@keyframes auraOk{   0%{filter: drop-shadow(0 0 0 rgba(255,176,32,0)); } 50%{ filter: drop-shadow(0 0 40px rgba(255,176,32,.7)); } 100%{ filter: drop-shadow(0 0 0 rgba(255,176,32,0)); } }
@keyframes auraGood{ 0%{filter: drop-shadow(0 0 0 rgba(255,217,61,0)); } 50%{ filter: drop-shadow(0 0 40px rgba(255,217,61,.7)); } 100%{ filter: drop-shadow(0 0 0 rgba(255,217,61,0)); } }
@keyframes auraGreat{0%{filter: drop-shadow(0 0 0 rgba(77,209,103,0)); } 50%{ filter: drop-shadow(0 0 40px rgba(77,209,103,.7)); } 100%{ filter: drop-shadow(0 0 0 rgba(77,209,103,0)); } }

/* 11) Runway dust puff (toggle .dust on #overlay-root) */
.dust .number-display::before{
  content:"";
  position:absolute; left:50%; top: 58%;
  width: 240px; height: 60px;
  transform: translate(-50%,-50%) scaleX(.2) scaleY(.4);
  background: radial-gradient(closest-side, rgba(255,255,255,.5), rgba(255,255,255,0) 70%);
  filter: blur(8px);
  opacity:0;
  pointer-events:none;
  animation: dustPuff 700ms ease-out forwards;
}
@keyframes dustPuff{
  0%{ opacity:0; transform: translate(-50%,-50%) scaleX(.2) scaleY(.4); }
  20%{ opacity:.7; }
  100%{ opacity:0; transform: translate(-50%,-50%) scaleX(1.3) scaleY(1); filter: blur(16px); }
}
